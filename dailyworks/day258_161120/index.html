<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <title>#258 Web API practice</title>
  </head>
  <body>
    <h1>Web APIの練習です:3</h1>

    <img id="img" src="">
    <div id="info">
      <p id="name"></p>
      <p id="email"></p>
    </div>

    <div id="reload">
      <button id="btn">ダミーユーザ情報</button>
    </div>

    <p>参考：
    <a href="http://paiza.hatenablog.com/entry/2016/06/21/%E9%9D%A2%E5%80%92%E3%81%AA%E6%89%8B%E7%B6%9A%E3%81%8D%E4%B8%8D%E8%A6%81%EF%BC%81%E3%80%8CWeb_API%E3%80%8D%E3%81%AE%E8%B6%85%E3%81%8A%E6%89%8B%E8%BB%BD%E6%B4%BB%E7%94%A8%E8%A1%93%E3%82%92JavaScript">paiza開発日誌</a>
    </p>

<script>

'use strict';
const btn = document.getElementById('btn');

btn.addEventListener('click', () => {
  const script = document.createElement('script');

  script.src = "http://api.randomuser.me/?callback=jsonData";
  document.body.appendChild(script);
  document.body.removeChild(script);
})

function jsonData(data) {
  const result = data.results[0];
  const name = document.getElementById('name');
  const email = document.getElementById('email');
  const img = document.getElementById('img');

  img.src = result.picture.large;
  email.textContent = result.email;
  name.textContent = result.name.first + " "
}

</script>

  </body>
</html>
